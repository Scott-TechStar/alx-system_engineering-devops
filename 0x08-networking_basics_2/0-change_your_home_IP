#!/usr/bin/env bash
# Bash script that configures an Ubuntu server with the below requirements.
# localhost resolves to 127.0.0.2 and facebook.com resolves to 8.8.8.8

# Check if the script is executed with root privileges
if [[ $(id -u) -ne 0 ]]; then
  echo "This script must be run as root. Use sudo or run as root."
  exit 1
fi

# Define the hostname-to-IP mappings
localhost_ip="127.0.0.2"
facebook_ip="8.8.8.8"

# Backup the original hosts file
cp /etc/hosts /etc/hosts.bak

# Check if localhost entry already exists and update it
if grep -q "^127.0.0.1[[:space:]]*localhost" /etc/hosts; then
  sed -i "s/^127.0.0.1[[:space:]]*localhost$/127.0.0.1\tlocalhost\n$localhost_ip\tlocalhost/g" /etc/hosts
else
  echo -e "127.0.0.1\tlocalhost\n$localhost_ip\tlocalhost" >> /etc/hosts
fi

# Add the Facebook entry
echo -e "$facebook_ip\tfacebook.com" >> /etc/hosts

echo "Hostnames configured successfully."

